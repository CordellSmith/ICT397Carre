<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Assignment2 - OOber Taxi: PhysicsEngine Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PhysicsEngine Class Reference</h1><!-- doxytag: class="PhysicsEngine" -->Physics engine that handles all object collisions and physics based movement.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_physics_engine_8h-source.html">PhysicsEngine.h</a>&gt;</code>
<p>
<div class="dynheader">
Collaboration diagram for PhysicsEngine:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine__coll__graph.png" border="0" usemap="#_physics_engine__coll__map" alt="Collaboration graph"></center>
<map name="_physics_engine__coll__map">
<area shape="rect" href="classbt_aligned_object_array.html" title="btAlignedObjectArray\&lt; btCollisionShape * \&gt;" alt="" coords="29,288,304,315"><area shape="rect" href="classbt_aligned_allocator.html" title="btAlignedAllocator\&lt; btCollisionShape *, 16 \&gt;" alt="" coords="5,147,283,173"><area shape="rect" href="classbt_aligned_allocator.html" title="btAlignedAllocator\&lt; T, Alignment \&gt;" alt="" coords="123,5,347,32"><area shape="rect" href="classbt_aligned_allocator.html" title="btAlignedAllocator\&lt; T, 16 \&gt;" alt="" coords="236,96,415,123"><area shape="rect" href="classbt_aligned_object_array.html" title="btAlignedObjectArray\&lt; T \&gt;" alt="" coords="237,197,413,224"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="class_physics_engine-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077">RIGID_BODY_TYPE</a> { <br>
&nbsp;&nbsp;<a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28">CAMERA</a> =  1, 
<a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0">BOX</a> =  2, 
<a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077d3a5fc2a81d07760aa5d18bb1b79cd9b">SPHERE</a> =  3, 
<a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077504250562f6fb421a154714f65c870ad">HEIGHTFIELD</a> =  4, 
<br>
&nbsp;&nbsp;<a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077c9cfd25eead0581ed6bd4050b3cfbe13">PLANE</a> =  5
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enum for the different types of rigid bodies created.  <a href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#7fc9180ea453680df0b863fa157c5b92">PhysicsEngine</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor.  <a href="#7fc9180ea453680df0b863fa157c5b92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#e5f076ee99bbfdbc79ab2d27366d8476">~PhysicsEngine</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">De-constructor.  <a href="#e5f076ee99bbfdbc79ab2d27366d8476"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#2f5bb835773d64a6ff21933d5137c427">CreateStaticRigidBody</a> (btVector3 &amp;pos, std::string type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates static rigid body.  <a href="#2f5bb835773d64a6ff21933d5137c427"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#549c7e9116d06e8f7599497c3c4f6fd1">CreateDynamicRigidBody</a> (btVector3 &amp;pos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates dynamic rigid body.  <a href="#549c7e9116d06e8f7599497c3c4f6fd1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#6096d332305e50fba86f377c00ec27e0">CreatePlayerControlledRigidBody</a> (btVector3 &amp;playerObj)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates dynamic rigid body for a player controlled object.  <a href="#6096d332305e50fba86f377c00ec27e0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#9d6bec05e95efd4b9168b507a90883b9">Simulate</a> (std::vector&lt; btVector3 &gt; &amp;bodyPos, btVector3 &amp;playerObj)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simulate the dynamic world.  <a href="#9d6bec05e95efd4b9168b507a90883b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#f951fe2e462f4b487b653199298a1bb3">CreateHeightfieldTerrainShape</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a heightfield terrain shape.  <a href="#f951fe2e462f4b487b653199298a1bb3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_physics_engine.html#2e877a86ca85b2ec58b3c046af057d76">ActivateAllObjects</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Activates all objects.  <a href="#2e877a86ca85b2ec58b3c046af057d76"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Physics engine that handles all object collisions and physics based movement. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Bullet Continuous Collision Detection and Physics Library Copyright (c) 2003-2007 Erwin Coumans <a href="http://continuousphysics.com/Bullet/">http://continuousphysics.com/Bullet/</a></dd></dl>
This software is provided 'as-is', without any express or implied warranty. In no event will the authors be held liable for any damages arising from the use of this software. Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions:<p>
1. The origin of this software must not be misrepresented; you must not claim that you wrote the original software. If you use this software in a product, an acknowledgment in the product documentation would be appreciated but is not required. 2. Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software. 3. This notice may not be removed or altered from any source distribution.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Jack Matters</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>29/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.0 Initial start. Took ideas from a previous physics engine I worked on that used ReactPhysics3D. Also used HelloWorld example as a guide. Managed to get 2 spheres (currently shown as floor planes) to collide off each other and a floor.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>05/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.1 Altered code to draw a square dynamic rigid body instead of a sphere for testing purposes. Started work on camera collision.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>06/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.2 Tidied up camera (player object) code. Force is now applied in direction camera was moved, calculations are done, then camera is moved to updated position. Still needs some work, but will do for now.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>18/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.3 Big gap between versions due to other units requirements. Set up functions for initializing all object rigid bodies. Will need changing.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>19/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.4 Added testing for heightfield terrain shape. Got it loading and working, but without a visual terrain it is not possible to see if it is working correctly or not. Have commented it out until I am able to keep working on it. Also added some more doxygen comments.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>20/04/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.5 Did some research and found out that objects become inactive after a set time of inactivity. Created new function to ensure all objects are always active. This fixed the camera getting stuck, as well as other objects getting stuck in the air.</dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>31/05/2018 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>2.0 Final version for submission. </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8h-source.html#l00056">56</a> of file <a class="el" href="_physics_engine_8h-source.html">PhysicsEngine.h</a>.</p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="f9cf664e8df4f9a518448aa122957077"></a><!-- doxytag: member="PhysicsEngine::RIGID_BODY_TYPE" ref="f9cf664e8df4f9a518448aa122957077" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077">PhysicsEngine::RIGID_BODY_TYPE</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enum for the different types of rigid bodies created. 
<p>
Enum used to differentiate between the different types of rigid bodies created <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28"></a><!-- doxytag: member="CAMERA" ref="f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28" args="" -->CAMERA</em>&nbsp;</td><td>
<a class="el" href="class_camera.html" title="Used for the GLM math library.">Camera</a> object rigid body </td></tr>
<tr><td valign="top"><em><a class="anchor" name="f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0"></a><!-- doxytag: member="BOX" ref="f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0" args="" -->BOX</em>&nbsp;</td><td>
Box shape rigid body </td></tr>
<tr><td valign="top"><em><a class="anchor" name="f9cf664e8df4f9a518448aa122957077d3a5fc2a81d07760aa5d18bb1b79cd9b"></a><!-- doxytag: member="SPHERE" ref="f9cf664e8df4f9a518448aa122957077d3a5fc2a81d07760aa5d18bb1b79cd9b" args="" -->SPHERE</em>&nbsp;</td><td>
Sphere shape rigid body </td></tr>
<tr><td valign="top"><em><a class="anchor" name="f9cf664e8df4f9a518448aa122957077504250562f6fb421a154714f65c870ad"></a><!-- doxytag: member="HEIGHTFIELD" ref="f9cf664e8df4f9a518448aa122957077504250562f6fb421a154714f65c870ad" args="" -->HEIGHTFIELD</em>&nbsp;</td><td>
Heightfield terrain shape rigid body </td></tr>
<tr><td valign="top"><em><a class="anchor" name="f9cf664e8df4f9a518448aa122957077c9cfd25eead0581ed6bd4050b3cfbe13"></a><!-- doxytag: member="PLANE" ref="f9cf664e8df4f9a518448aa122957077c9cfd25eead0581ed6bd4050b3cfbe13" args="" -->PLANE</em>&nbsp;</td><td>
Plane shape rigid body </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="_physics_engine_8h-source.html#l00065">65</a> of file <a class="el" href="_physics_engine_8h-source.html">PhysicsEngine.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00066"></a>00066                 {
<a name="l00067"></a>00067                         <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28">CAMERA</a> = 1,                     
<a name="l00068"></a>00068                         <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0">BOX</a> = 2,                        
<a name="l00069"></a>00069                         <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077d3a5fc2a81d07760aa5d18bb1b79cd9b">SPHERE</a> = 3,                     
<a name="l00070"></a>00070                         <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077504250562f6fb421a154714f65c870ad">HEIGHTFIELD</a> = 4,        
<a name="l00071"></a>00071                         <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077c9cfd25eead0581ed6bd4050b3cfbe13">PLANE</a> = 5                       
<a name="l00072"></a>00072                 }<a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077" title="Enum for the different types of rigid bodies created.">RIGID_BODY_TYPE</a>;
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="7fc9180ea453680df0b863fa157c5b92"></a><!-- doxytag: member="PhysicsEngine::PhysicsEngine" ref="7fc9180ea453680df0b863fa157c5b92" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhysicsEngine::PhysicsEngine           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor. 
<p>
This is the default constructor<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00012">12</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00013"></a>00013 {
<a name="l00014"></a>00014         <span class="comment">// Collision configuration contains default setup for memory, collision setup</span>
<a name="l00015"></a>00015         <a class="code" href="classbt_default_collision_configuration.html">btDefaultCollisionConfiguration</a>* collisionConfiguration = <span class="keyword">new</span> <a class="code" href="classbt_default_collision_configuration.html">btDefaultCollisionConfiguration</a>();
<a name="l00016"></a>00016 
<a name="l00017"></a>00017         <span class="comment">// Use the default collision dispatcher</span>
<a name="l00018"></a>00018         <a class="code" href="classbt_collision_dispatcher.html">btCollisionDispatcher</a>* dispatcher = <span class="keyword">new</span> <a class="code" href="classbt_collision_dispatcher.html">btCollisionDispatcher</a>(collisionConfiguration);
<a name="l00019"></a>00019 
<a name="l00020"></a>00020         <span class="comment">// A good general purpose broadphase</span>
<a name="l00021"></a>00021         <a class="code" href="classbt_broadphase_interface.html">btBroadphaseInterface</a>* overlappingPairCache = <span class="keyword">new</span> <a class="code" href="structbt_dbvt_broadphase.html">btDbvtBroadphase</a>();
<a name="l00022"></a>00022 
<a name="l00023"></a>00023         <span class="comment">// The default constraint solver</span>
<a name="l00024"></a>00024         btSequentialImpulseConstraintSolver* solver = <span class="keyword">new</span> btSequentialImpulseConstraintSolver;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026         <span class="comment">// The dynamic world</span>
<a name="l00027"></a>00027         m_dynamicsWorld = <span class="keyword">new</span> btDiscreteDynamicsWorld(dispatcher, overlappingPairCache, solver, collisionConfiguration);
<a name="l00028"></a>00028 
<a name="l00029"></a>00029         <span class="comment">// Set the gravity</span>
<a name="l00030"></a>00030         m_dynamicsWorld-&gt;setGravity(btVector3(0, 0, 0));
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <span class="comment">// Initialize all objects to static</span>
<a name="l00033"></a>00033         m_isDynamic = <span class="keyword">false</span>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         <span class="comment">// Initialize player object location</span>
<a name="l00036"></a>00036         m_playerObject.setZero();
<a name="l00037"></a>00037 
<a name="l00038"></a>00038         m_oldForce.setZero();
<a name="l00039"></a>00039         m_newForce.setZero();
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a>00042         <span class="comment">/*btIDebugDraw tempp;</span>
<a name="l00043"></a>00043 <span class="comment">        m_dynamicsWorld-&gt;setDebugDrawer(btIDebugDraw::DebugDrawModes::DBG_MAX_DEBUG_DRAW_MODE);</span>
<a name="l00044"></a>00044 <span class="comment">        m_dynamicsWorld-&gt;deb*/</span>
<a name="l00045"></a>00045 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e5f076ee99bbfdbc79ab2d27366d8476"></a><!-- doxytag: member="PhysicsEngine::~PhysicsEngine" ref="e5f076ee99bbfdbc79ab2d27366d8476" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PhysicsEngine::~PhysicsEngine           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
De-constructor. 
<p>
This is the de-constructor<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Not implemented yet</dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00048">48</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00048"></a>00048 {};
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="2f5bb835773d64a6ff21933d5137c427"></a><!-- doxytag: member="PhysicsEngine::CreateStaticRigidBody" ref="2f5bb835773d64a6ff21933d5137c427" args="(btVector3 &amp;pos, std::string type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::CreateStaticRigidBody           </td>
          <td>(</td>
          <td class="paramtype">btVector3 &amp;&nbsp;</td>
          <td class="paramname"> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates static rigid body. 
<p>
Create a static box shape rigid body at the given xyz position<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>- Position to create body</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00051">51</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>

<p>References <a class="el" href="_physics_engine_8h-source.html#l00068">BOX</a>, and <a class="el" href="bt_aligned_object_array_8h-source.html#l00274">btAlignedObjectArray&lt; T &gt;::push_back()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00052"></a>00052 {
<a name="l00053"></a>00053         btCollisionShape* groundShape;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055         <span class="keywordflow">if</span> (type == <span class="stringliteral">"knight"</span>)
<a name="l00056"></a>00056                 groundShape = <span class="keyword">new</span> btBoxShape(btVector3(btScalar(80.0), btScalar(100.0), btScalar(80.0)));
<a name="l00057"></a>00057         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <span class="stringliteral">"rock"</span>)
<a name="l00058"></a>00058                 groundShape = <span class="keyword">new</span> btBoxShape(btVector3(btScalar(225.0), btScalar(100.0), btScalar(200.0)));
<a name="l00059"></a>00059         <span class="keywordflow">else</span>
<a name="l00060"></a>00060                 groundShape = <span class="keyword">new</span> btBoxShape(btVector3(btScalar(0.0), btScalar(0.0), btScalar(0.0)));
<a name="l00061"></a>00061 
<a name="l00062"></a>00062         m_collisionShapes.<a class="code" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1">push_back</a>(groundShape);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064         btVector3 temp = pos;
<a name="l00065"></a>00065         <span class="comment">//temp.setX(temp.getX() - 3000);</span>
<a name="l00066"></a>00066         <span class="comment">//temp.setZ(temp.getZ() - 50);</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068         <span class="comment">// Initialize transform and location</span>
<a name="l00069"></a>00069         btTransform groundTransform;
<a name="l00070"></a>00070         groundTransform.setIdentity();
<a name="l00071"></a>00071         groundTransform.setOrigin(temp);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073         <span class="comment">// Set mass (zero for static)</span>
<a name="l00074"></a>00074         m_mass = 0.0;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076         <span class="comment">// Set dynamic objects to objects with mass that is non-zero</span>
<a name="l00077"></a>00077         m_isDynamic = (m_mass != 0.0f);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         btVector3 localInertia(0.0, 0.0, 0.0);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="keywordflow">if</span> (m_isDynamic)
<a name="l00082"></a>00082                 groundShape-&gt;calculateLocalInertia(m_mass, localInertia);
<a name="l00083"></a>00083 
<a name="l00084"></a>00084         <span class="comment">//using motionstate is optional, it provides interpolation capabilities, and only synchronizes 'active' objects</span>
<a name="l00085"></a>00085         btDefaultMotionState* myMotionState = <span class="keyword">new</span> btDefaultMotionState(groundTransform);
<a name="l00086"></a>00086         <a class="code" href="structbt_rigid_body_1_1bt_rigid_body_construction_info.html">btRigidBody::btRigidBodyConstructionInfo</a> rbInfo(m_mass, myMotionState, groundShape, localInertia);
<a name="l00087"></a>00087         <a class="code" href="classbt_rigid_body.html">btRigidBody</a>* body = <span class="keyword">new</span> <a class="code" href="classbt_rigid_body.html">btRigidBody</a>(rbInfo);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         <span class="comment">// Set the index for the type of rigid body that is being created</span>
<a name="l00090"></a>00090         body-&gt;setUserIndex(<a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0">BOX</a>);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092         <span class="comment">// Add the body to the dynamic world</span>
<a name="l00093"></a>00093         m_dynamicsWorld-&gt;addRigidBody(body);
<a name="l00094"></a>00094 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine_2f5bb835773d64a6ff21933d5137c427_cgraph.png" border="0" usemap="#class_physics_engine_2f5bb835773d64a6ff21933d5137c427_cgraph_map" alt=""></center>
<map name="class_physics_engine_2f5bb835773d64a6ff21933d5137c427_cgraph_map">
<area shape="rect" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1" title="btAlignedObjectArray::push_back" alt="" coords="301,5,517,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="549c7e9116d06e8f7599497c3c4f6fd1"></a><!-- doxytag: member="PhysicsEngine::CreateDynamicRigidBody" ref="549c7e9116d06e8f7599497c3c4f6fd1" args="(btVector3 &amp;pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::CreateDynamicRigidBody           </td>
          <td>(</td>
          <td class="paramtype">btVector3 &amp;&nbsp;</td>
          <td class="paramname"> <em>pos</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates dynamic rigid body. 
<p>
This is a test function that creates dynamic rigid bodies for testing purposes<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>- Position to create dynamic body</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00140">140</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>

<p>References <a class="el" href="_physics_engine_8h-source.html#l00068">BOX</a>, and <a class="el" href="bt_aligned_object_array_8h-source.html#l00274">btAlignedObjectArray&lt; T &gt;::push_back()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00141"></a>00141 {
<a name="l00142"></a>00142         <span class="comment">// Create box shape and add to shape array</span>
<a name="l00143"></a>00143         btCollisionShape* boxShape = <span class="keyword">new</span> btBoxShape(btVector3(btScalar(20), btScalar(50), btScalar(20)));
<a name="l00144"></a>00144         m_collisionShapes.<a class="code" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1">push_back</a>(boxShape);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="comment">// Create a dynamic object</span>
<a name="l00147"></a>00147         btTransform startTransform;
<a name="l00148"></a>00148         startTransform.setIdentity();
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="comment">// Set mass (non-zero for dynamic)</span>
<a name="l00151"></a>00151         m_mass = 100.0f;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153         <span class="comment">// Set dynamic objects to objects with mass that is non-zero</span>
<a name="l00154"></a>00154         m_isDynamic = (m_mass != 0.0f);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         btVector3 localInertia(0.0, 0.0, 0.0);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158         <span class="keywordflow">if</span> (m_isDynamic)
<a name="l00159"></a>00159                 boxShape-&gt;calculateLocalInertia(m_mass, localInertia);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         <span class="comment">// Set origin of body</span>
<a name="l00162"></a>00162         startTransform.setOrigin(pos);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164         <span class="comment">//using motionstate is recommended, it provides interpolation capabilities, and only synchronizes 'active' objects</span>
<a name="l00165"></a>00165         btDefaultMotionState* myMotionState = <span class="keyword">new</span> btDefaultMotionState(startTransform);
<a name="l00166"></a>00166         <a class="code" href="structbt_rigid_body_1_1bt_rigid_body_construction_info.html">btRigidBody::btRigidBodyConstructionInfo</a> rbInfo(m_mass, myMotionState, boxShape, localInertia);
<a name="l00167"></a>00167         <a class="code" href="classbt_rigid_body.html">btRigidBody</a>* body = <span class="keyword">new</span> <a class="code" href="classbt_rigid_body.html">btRigidBody</a>(rbInfo);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         <span class="comment">// Set the index for the type of rigid body that is being created</span>
<a name="l00170"></a>00170         body-&gt;setUserIndex(<a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077219567afcdbe1eb7fe073c81b43dd5c0">BOX</a>);
<a name="l00171"></a>00171         
<a name="l00172"></a>00172         <span class="comment">// Add the body to the dynamic world</span>
<a name="l00173"></a>00173         m_dynamicsWorld-&gt;addRigidBody(body);
<a name="l00174"></a>00174 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine_549c7e9116d06e8f7599497c3c4f6fd1_cgraph.png" border="0" usemap="#class_physics_engine_549c7e9116d06e8f7599497c3c4f6fd1_cgraph_map" alt=""></center>
<map name="class_physics_engine_549c7e9116d06e8f7599497c3c4f6fd1_cgraph_map">
<area shape="rect" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1" title="btAlignedObjectArray::push_back" alt="" coords="317,5,533,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="6096d332305e50fba86f377c00ec27e0"></a><!-- doxytag: member="PhysicsEngine::CreatePlayerControlledRigidBody" ref="6096d332305e50fba86f377c00ec27e0" args="(btVector3 &amp;playerObj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::CreatePlayerControlledRigidBody           </td>
          <td>(</td>
          <td class="paramtype">btVector3 &amp;&nbsp;</td>
          <td class="paramname"> <em>playerObj</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates dynamic rigid body for a player controlled object. 
<p>
This is a test function that creates a dynamic rigid body for the player controlled object (as of now, that is the camera)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>playerObj</em>&nbsp;</td><td>- Object that is player controlled</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00097">97</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>

<p>References <a class="el" href="_physics_engine_8h-source.html#l00067">CAMERA</a>, and <a class="el" href="bt_aligned_object_array_8h-source.html#l00274">btAlignedObjectArray&lt; T &gt;::push_back()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00098"></a>00098 {
<a name="l00099"></a>00099         <span class="comment">// Create box shape and add to shape array</span>
<a name="l00100"></a>00100         btCollisionShape* camShape = <span class="keyword">new</span> btBoxShape(btVector3(btScalar(30), btScalar(20), btScalar(50)));
<a name="l00101"></a>00101         m_collisionShapes.<a class="code" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1">push_back</a>(camShape);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         <span class="comment">// Create a dynamic object</span>
<a name="l00104"></a>00104         btTransform startTransform;
<a name="l00105"></a>00105         startTransform.setIdentity();
<a name="l00106"></a>00106 
<a name="l00107"></a>00107         <span class="comment">// Set origin of body</span>
<a name="l00108"></a>00108         startTransform.setOrigin(playerObj);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         <span class="comment">// Set mass (non-zero for dynamic)</span>
<a name="l00111"></a>00111         m_mass = 2.0f;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         <span class="comment">// Set dynamic objects to objects with mass that is non-zero</span>
<a name="l00114"></a>00114         m_isDynamic = (m_mass != 0.0f);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116         btVector3 localInertia(0.0, 0.0, 0.0);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="keywordflow">if</span> (m_isDynamic)
<a name="l00119"></a>00119                 camShape-&gt;calculateLocalInertia(m_mass, localInertia);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121         <span class="comment">//using motionstate is recommended, it provides interpolation capabilities, and only synchronizes 'active' objects</span>
<a name="l00122"></a>00122         btDefaultMotionState* myMotionState = <span class="keyword">new</span> btDefaultMotionState(startTransform);
<a name="l00123"></a>00123         <a class="code" href="structbt_rigid_body_1_1bt_rigid_body_construction_info.html">btRigidBody::btRigidBodyConstructionInfo</a> rbInfo(m_mass, myMotionState, camShape, localInertia);
<a name="l00124"></a>00124         <a class="code" href="classbt_rigid_body.html">btRigidBody</a>* body = <span class="keyword">new</span> <a class="code" href="classbt_rigid_body.html">btRigidBody</a>(rbInfo);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126         <span class="comment">// Set the index for the type of rigid body that is being created</span>
<a name="l00127"></a>00127         body-&gt;setUserIndex(<a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28">CAMERA</a>);
<a name="l00128"></a>00128 
<a name="l00129"></a>00129         <span class="comment">// Add the body to the dynamic world</span>
<a name="l00130"></a>00130         m_dynamicsWorld-&gt;addRigidBody(body);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132         <span class="comment">// Set new player object coordinates</span>
<a name="l00133"></a>00133         m_playerObject = playerObj;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135         <span class="comment">// Disable gravity for this object</span>
<a name="l00136"></a>00136         <span class="comment">//body-&gt;setGravity(btVector3(0.0, 0.0, 0.0));</span>
<a name="l00137"></a>00137 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine_6096d332305e50fba86f377c00ec27e0_cgraph.png" border="0" usemap="#class_physics_engine_6096d332305e50fba86f377c00ec27e0_cgraph_map" alt=""></center>
<map name="class_physics_engine_6096d332305e50fba86f377c00ec27e0_cgraph_map">
<area shape="rect" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1" title="btAlignedObjectArray::push_back" alt="" coords="363,5,579,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="9d6bec05e95efd4b9168b507a90883b9"></a><!-- doxytag: member="PhysicsEngine::Simulate" ref="9d6bec05e95efd4b9168b507a90883b9" args="(std::vector&lt; btVector3 &gt; &amp;bodyPos, btVector3 &amp;playerObj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::Simulate           </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; btVector3 &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>bodyPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">btVector3 &amp;&nbsp;</td>
          <td class="paramname"> <em>playerObj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simulate the dynamic world. 
<p>
This function simulates the dynamic world by handling all physics calculations each step<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bodyPos</em>&nbsp;</td><td>- Update all rigid body positions for drawing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>playerObj</em>&nbsp;</td><td>- Sets new player object position</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00177">177</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>

<p>References <a class="el" href="bt_rigid_body_8h-source.html#l00282">btRigidBody::applyCentralForce()</a>, <a class="el" href="_physics_engine_8h-source.html#l00067">CAMERA</a>, <a class="el" href="bt_rigid_body_8h-source.html#l00362">btRigidBody::getLinearVelocity()</a>, <a class="el" href="bt_rigid_body_8h-source.html#l00474">btRigidBody::getMotionState()</a>, btMotionState::getWorldTransform(), <a class="el" href="bt_rigid_body_8h-source.html#l00370">btRigidBody::setLinearVelocity()</a>, and <a class="el" href="bt_rigid_body_8h-source.html#l00203">btRigidBody::upcast()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179         m_dynamicsWorld-&gt;stepSimulation(1.f / 60.f, 10);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181         <span class="comment">// Update positions of all dynamic objects</span>
<a name="l00182"></a>00182         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = m_dynamicsWorld-&gt;getNumCollisionObjects() - 1; j &gt;= 0; j--)
<a name="l00183"></a>00183         {
<a name="l00184"></a>00184                 <span class="comment">// Get the next object, and activate it</span>
<a name="l00185"></a>00185                 btCollisionObject* obj = m_dynamicsWorld-&gt;getCollisionObjectArray()[j];
<a name="l00186"></a>00186                 <a class="code" href="classbt_rigid_body.html">btRigidBody</a>* body = <a class="code" href="classbt_rigid_body.html#59077fce3d2efd193a3fd7d7de2c97e8">btRigidBody::upcast</a>(obj);
<a name="l00187"></a>00187                 btTransform trans;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189                 <span class="comment">// Reset forces on player object prior to next step simulation</span>
<a name="l00190"></a>00190                 <span class="keywordflow">if</span> (body-&gt;getUserIndex() == <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28">CAMERA</a>)
<a name="l00191"></a>00191                 {
<a name="l00192"></a>00192                         <span class="comment">//body-&gt;clearForces();</span>
<a name="l00193"></a>00193                         btVector3 tempVel = body-&gt;<a class="code" href="classbt_rigid_body.html#d04b979396367f3f1945cebff4933252">getLinearVelocity</a>();
<a name="l00194"></a>00194                         <span class="comment">//body-&gt;setLinearVelocity(btVector3(0,tempVel.getY(),0));</span>
<a name="l00195"></a>00195                         body-&gt;<a class="code" href="classbt_rigid_body.html#d692042edc901425189cf1d067eebac6">setLinearVelocity</a>(btVector3(0, 0, 0));
<a name="l00196"></a>00196                 }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198                 <span class="comment">// Update rigid body positions</span>
<a name="l00199"></a>00199                 <span class="keywordflow">if</span> (body &amp;&amp; body-&gt;<a class="code" href="classbt_rigid_body.html#2bbea712d9095f05ff3b031bbe4e6521">getMotionState</a>())
<a name="l00200"></a>00200                 {
<a name="l00201"></a>00201                         body-&gt;<a class="code" href="classbt_rigid_body.html#2bbea712d9095f05ff3b031bbe4e6521">getMotionState</a>()-&gt;<a class="code" href="classbt_motion_state.html#5d30ed64161a4f36fe2affc3d3501412">getWorldTransform</a>(trans);
<a name="l00202"></a>00202                 }
<a name="l00203"></a>00203                 <span class="keywordflow">else</span>
<a name="l00204"></a>00204                 {
<a name="l00205"></a>00205                         trans = obj-&gt;getWorldTransform();
<a name="l00206"></a>00206                 }
<a name="l00207"></a>00207                 
<a name="l00208"></a>00208                 <span class="comment">// Check to see if player object</span>
<a name="l00209"></a>00209                 <span class="keywordflow">if</span> (body-&gt;getUserIndex() == <a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa1229570775b12039b51b36d92231a67695ea07e28">CAMERA</a>)
<a name="l00210"></a>00210                 {
<a name="l00211"></a>00211                         <span class="comment">// TODO: Make this better (Jack)</span>
<a name="l00212"></a>00212                         <span class="comment">// Apply force in direction camera was moved</span>
<a name="l00213"></a>00213                         m_newForce.setX((playerObj.x() - m_playerObject.x()) * 10000);
<a name="l00214"></a>00214                         <span class="comment">//m_newForce.setY((playerObj.y() - m_playerObject.y()) * 10000);</span>
<a name="l00215"></a>00215                         m_newForce.setZ((playerObj.z() - m_playerObject.z()) * 10000);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217                         <span class="comment">// Update rigid body location for drawing</span>
<a name="l00218"></a>00218                         body-&gt;<a class="code" href="classbt_rigid_body.html#48478896407083f4ff64299e0c3c4a32">applyCentralForce</a>(m_newForce);
<a name="l00219"></a>00219                         m_playerObject = trans.getOrigin();
<a name="l00220"></a>00220                         playerObj = m_playerObject;
<a name="l00221"></a>00221                 }
<a name="l00222"></a>00222                 <span class="keywordflow">else</span>
<a name="l00223"></a>00223                 {
<a name="l00224"></a>00224                         <span class="comment">// Update object positions for drawing</span>
<a name="l00225"></a>00225                         bodyPos[j].setX(trans.getOrigin().getX());
<a name="l00226"></a>00226                         bodyPos[j].setY(trans.getOrigin().getY());
<a name="l00227"></a>00227                         bodyPos[j].setZ(trans.getOrigin().getZ());
<a name="l00228"></a>00228                 }       
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine_9d6bec05e95efd4b9168b507a90883b9_cgraph.png" border="0" usemap="#class_physics_engine_9d6bec05e95efd4b9168b507a90883b9_cgraph_map" alt=""></center>
<map name="class_physics_engine_9d6bec05e95efd4b9168b507a90883b9_cgraph_map">
<area shape="rect" href="classbt_rigid_body.html#48478896407083f4ff64299e0c3c4a32" title="btRigidBody::applyCentralForce" alt="" coords="231,5,433,32"><area shape="rect" href="classbt_rigid_body.html#d04b979396367f3f1945cebff4933252" title="btRigidBody::getLinearVelocity" alt="" coords="232,56,432,83"><area shape="rect" href="classbt_rigid_body.html#2bbea712d9095f05ff3b031bbe4e6521" title="btRigidBody::getMotionState" alt="" coords="239,107,425,133"><area shape="rect" href="classbt_motion_state.html#5d30ed64161a4f36fe2affc3d3501412" title="btMotionState::getWorldTransform" alt="" coords="223,157,441,184"><area shape="rect" href="classbt_rigid_body.html#d692042edc901425189cf1d067eebac6" title="btRigidBody::setLinearVelocity" alt="" coords="232,208,432,235"><area shape="rect" href="classbt_rigid_body.html#59077fce3d2efd193a3fd7d7de2c97e8" title="btRigidBody::upcast" alt="" coords="263,259,401,285"></map>
</div>

</div>
</div><p>
<a class="anchor" name="f951fe2e462f4b487b653199298a1bb3"></a><!-- doxytag: member="PhysicsEngine::CreateHeightfieldTerrainShape" ref="f951fe2e462f4b487b653199298a1bb3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::CreateHeightfieldTerrainShape           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a heightfield terrain shape. 
<p>
This is a test function that creates a heightfield terrain shape<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00233">233</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>

<p>References <a class="el" href="_physics_engine_8h-source.html#l00070">HEIGHTFIELD</a>, <a class="el" href="_g_l_m_2include_2_g_l_m_2gtc_2quaternion_8inl-source.html#l00402">glm::length()</a>, and <a class="el" href="bt_aligned_object_array_8h-source.html#l00274">btAlignedObjectArray&lt; T &gt;::push_back()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00234"></a>00234 {
<a name="l00235"></a>00235         <span class="comment">//unsigned char *terrainData;</span>
<a name="l00236"></a>00236         <span class="keywordtype">int</span> sizet = 128;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238         <span class="comment">// Open for binary read, print error if error found</span>
<a name="l00239"></a>00239         std::ifstream infile(<span class="stringliteral">"res/terrain/height128.raw"</span>, std::ios::binary);
<a name="l00240"></a>00240         <span class="keywordflow">if</span> (!infile)
<a name="l00241"></a>00241         {
<a name="l00242"></a>00242                 exit(0);
<a name="l00243"></a>00243         }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245         <span class="comment">// Allocate memory, return false if no size = 0</span>
<a name="l00246"></a>00246         <span class="keywordflow">if</span> (m_terrainData)
<a name="l00247"></a>00247                 <span class="keyword">delete</span>[] m_terrainData;
<a name="l00248"></a>00248         <span class="keywordflow">if</span> (sizet&gt;0)
<a name="l00249"></a>00249                 m_terrainData = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[sizet*sizet];
<a name="l00250"></a>00250         <span class="keywordflow">if</span> (m_terrainData == NULL)
<a name="l00251"></a>00251                 exit(0);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253         <span class="comment">// Read in heightfield and get length of file</span>
<a name="l00254"></a>00254         infile.seekg(0, std::ios::end);
<a name="l00255"></a>00255         <span class="keywordtype">int</span> <a class="code" href="group__gtc__quaternion.html#g286560b01bedb4e046ffb71de22464f4">length</a> = infile.tellg();
<a name="l00256"></a>00256 
<a name="l00257"></a>00257         <span class="comment">// Read data in as a block, cast to char*, set size, and close file</span>
<a name="l00258"></a>00258         infile.seekg(0, std::ios::beg);
<a name="l00259"></a>00259         infile.read(reinterpret_cast&lt;char *&gt;(m_terrainData), length);
<a name="l00260"></a>00260         infile.close();
<a name="l00261"></a>00261         this-&gt;m_size = sizet;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263         <span class="comment">// Create heightfield shape</span>
<a name="l00264"></a>00264         btCollisionShape* heightfieldShape = <span class="keyword">new</span> btHeightfieldTerrainShape(128, 128, &amp;m_terrainData, 1, 1, 128, 1, PHY_UCHAR, <span class="keyword">false</span>);
<a name="l00265"></a>00265         m_collisionShapes.<a class="code" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1">push_back</a>(heightfieldShape);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267         <span class="comment">// Initialize transform and location</span>
<a name="l00268"></a>00268         btTransform startTransform;
<a name="l00269"></a>00269         startTransform.setIdentity();
<a name="l00270"></a>00270         startTransform.setOrigin(btVector3(0.0, 0.0, 0.0));
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         <span class="comment">// Set mass (non-zero for dynamic)</span>
<a name="l00273"></a>00273         m_mass = 0.0;
<a name="l00274"></a>00274         m_isDynamic = (m_mass != 0.0f);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <span class="comment">// Set initial inertia</span>
<a name="l00277"></a>00277         btVector3 localInertia(0.0, 0.0, 0.0);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279         <span class="comment">// Using motionstate is recommended, it provides interpolation capabilities, and only synchronizes 'active' objects</span>
<a name="l00280"></a>00280         btDefaultMotionState* myMotionState = <span class="keyword">new</span> btDefaultMotionState(startTransform);
<a name="l00281"></a>00281         <a class="code" href="structbt_rigid_body_1_1bt_rigid_body_construction_info.html">btRigidBody::btRigidBodyConstructionInfo</a> rbInfo(m_mass, myMotionState, heightfieldShape, localInertia);
<a name="l00282"></a>00282         <a class="code" href="classbt_rigid_body.html">btRigidBody</a>* body = <span class="keyword">new</span> <a class="code" href="classbt_rigid_body.html">btRigidBody</a>(rbInfo);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         <span class="comment">// Set the index for the type of rigid body that is being created</span>
<a name="l00285"></a>00285         body-&gt;setUserIndex(<a class="code" href="class_physics_engine.html#f9cf664e8df4f9a518448aa122957077504250562f6fb421a154714f65c870ad">HEIGHTFIELD</a>);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287         <span class="comment">// Add the body to the dynamic world</span>
<a name="l00288"></a>00288         m_dynamicsWorld-&gt;addRigidBody(body);
<a name="l00289"></a>00289 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="class_physics_engine_f951fe2e462f4b487b653199298a1bb3_cgraph.png" border="0" usemap="#class_physics_engine_f951fe2e462f4b487b653199298a1bb3_cgraph_map" alt=""></center>
<map name="class_physics_engine_f951fe2e462f4b487b653199298a1bb3_cgraph_map">
<area shape="rect" href="group__gtc__quaternion.html#g286560b01bedb4e046ffb71de22464f4" title="glm::length" alt="" coords="409,31,495,57"><area shape="rect" href="classbt_aligned_object_array.html#d61e10166e2c00f487095d3482b9edd1" title="btAlignedObjectArray::push_back" alt="" coords="344,81,560,108"><area shape="rect" href="group__gtc__quaternion.html#g4ce8bce2b7dc8206a31cfb8e7b779b76" title="glm::dot" alt="" coords="611,5,677,32"><area shape="rect" href="group__core__func__exponential.html#gfe49b7b63045b6ab94bffbcd7e7a7bc8" title="glm::sqrt" alt="" coords="608,56,680,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="2e877a86ca85b2ec58b3c046af057d76"></a><!-- doxytag: member="PhysicsEngine::ActivateAllObjects" ref="2e877a86ca85b2ec58b3c046af057d76" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhysicsEngine::ActivateAllObjects           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Activates all objects. 
<p>
Ensures that every rigid body remains active throughout simulation. Otherwise they can become 'stuck'<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="_physics_engine_8cpp-source.html#l00291">291</a> of file <a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00292"></a>00292 {
<a name="l00293"></a>00293         <span class="comment">// Loop through every rigid body object</span>
<a name="l00294"></a>00294         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = m_dynamicsWorld-&gt;getNumCollisionObjects() - 1; j &gt;= 0; j--)
<a name="l00295"></a>00295         {
<a name="l00296"></a>00296                 <span class="comment">// Get the next object, and activate it</span>
<a name="l00297"></a>00297                 btCollisionObject* obj = m_dynamicsWorld-&gt;getCollisionObjectArray()[j];
<a name="l00298"></a>00298                 obj-&gt;forceActivationState(DISABLE_DEACTIVATION);
<a name="l00299"></a>00299         }
<a name="l00300"></a>00300 }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/New/Documents/Games_Technology/Year4_Semester1/ICT397/~My Work/Assignment2/ICT397Carre/CarreGameEngine/CarreGameEngine/headers/<a class="el" href="_physics_engine_8h-source.html">PhysicsEngine.h</a><li>C:/Users/New/Documents/Games_Technology/Year4_Semester1/ICT397/~My Work/Assignment2/ICT397Carre/CarreGameEngine/CarreGameEngine/src/<a class="el" href="_physics_engine_8cpp-source.html">PhysicsEngine.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jun 1 13:02:37 2018 for Assignment2 - OOber Taxi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
